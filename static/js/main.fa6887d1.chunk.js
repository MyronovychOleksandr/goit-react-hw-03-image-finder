(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,a,t){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__2tdHM",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__1q_QM"}},12:function(e,a,t){e.exports={overlay:"Modal_overlay__3eyi8",modal:"Modal_modal__2BOem"}},14:function(e,a,t){e.exports={app:"App_app__3Ed40",button:"App_button__FRIBX"}},25:function(e,a,t){e.exports={imageGallery:"ImageGallery_imageGallery__372i9"}},73:function(e,a,t){},74:function(e,a,t){"use strict";t.r(a);var r=t(1),n=t(0),c=t.n(n),s=t(24),o=t.n(s),i=t(15),l=t(4),u=t(5),h=t(7),m=t(6),p=t(8),d=t.n(p),g=function(e){Object(h.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={inputValue:""},e.handleChange=function(a){e.setState({inputValue:a.target.value})},e.handleSubmit=function(a){a.preventDefault(),e.props.onSubmit(e.state.inputValue),e.setState({inputValue:""})},e}return Object(u.a)(t,[{key:"render",value:function(){return Object(r.jsx)("header",{className:d.a.searchbar,children:Object(r.jsxs)("form",{className:d.a.searchForm,children:[Object(r.jsx)("button",{type:"submit",onClick:this.handleSubmit,className:d.a.searchFormButton,children:Object(r.jsx)("span",{className:d.a.searchFormButtonLabel,children:"Search"})}),Object(r.jsx)("input",{className:d.a.searchFormInput,type:"text",value:this.state.inputValue,onChange:this.handleChange,placeholder:"Search images and photos"})]})})}}]),t}(n.Component),b=t(25),f=t.n(b),j=function(e){Object(h.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).handleGalleryClick=function(a){a.target.id&&e.props.onClick(a.target.id)},e}return Object(u.a)(t,[{key:"render",value:function(){return Object(r.jsx)("ul",{className:f.a.imageGallery,onClick:this.handleGalleryClick,children:this.props.children})}}]),t}(n.Component),y=t(11),v=t.n(y);function O(e){return e.images.map((function(e){var a=e.webformatURL,t=e.largeImageURL;return Object(r.jsx)("li",{className:v.a.imageGalleryItem,id:t,children:Object(r.jsx)("img",{src:a,id:t,alt:"",className:v.a.imageGalleryItemImage})},t)}))}var _=t(26),I=t.n(_),x=t(12),S=t.n(x),w=function(e){Object(h.a)(t,e);var a=Object(m.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.props.onClose)}},{key:"render",value:function(){return Object(r.jsx)("div",{className:S.a.overlay,children:Object(r.jsx)("div",{className:S.a.modal,children:Object(r.jsx)("img",{src:this.props.url,alt:""})})})}}]),t}(n.Component),k=t(13),F=t.n(k),C=t(27),G=t(9),L=t.n(G);L.a.defaults.baseURL="http://pixabay.com/api",L.a.defaults.params={key:"18864645-939ea59db410a3043a30cf718",image_type:"photo",orientation:"horizontal",per_page:12};var N={fetchImagesWithQuery:function(){var e=Object(C.a)(F.a.mark((function e(a,t){var r,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("",{params:{q:a,page:t}});case 3:return r=e.sent,n=r.data,e.abrupt("return",n.hits);case 8:return e.prev=8,e.t0=e.catch(0),console.log("error",{error:e.t0}),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a,t){return e.apply(this,arguments)}}()},B=t(14),M=t.n(B),E=function(e){Object(h.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={images:[],searchQuery:"",loading:!1,page:1,largeImageURL:""},e.fetchImages=function(){var a=e.state,t=a.searchQuery,r=a.page;e.setState({loading:!0}),N.fetchImagesWithQuery(t,r).then((function(a){return e.setState((function(e){return{images:[].concat(Object(i.a)(e.images),Object(i.a)(a)),page:e.page+1,loading:!1}}))}))},e.handleSearchFormSubmit=function(a){e.state.searchQuery!==a&&e.setState({searchQuery:a,page:1,images:[]})},e.handleOpenModal=function(a){e.setState({largeImageURL:a}),window.addEventListener("keydown",e.handleEscapeModale)},e.handleEscapeModale=function(a){"Escape"===a.code&&e.setState({largeImageURL:""})},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetchImages()}},{key:"componentDidUpdate",value:function(e,a){var t=a.searchQuery,r=this.state.searchQuery,n=a.images,c=this.state.images;if(t!==r&&this.fetchImages(),n!==c&&this.state.page>2){var s=window.innerHeight-150;window.scrollBy({top:s,behavior:"smooth"})}}},{key:"render",value:function(){var e=this.state,a=e.images,t=e.loading,n=e.largeImageURL;return Object(r.jsxs)("div",{className:M.a.app,children:[Object(r.jsx)(g,{onSubmit:this.handleSearchFormSubmit}),a.length>0&&Object(r.jsx)(j,{onClick:this.handleOpenModal,children:Object(r.jsx)(O,{images:a})}),t&&Object(r.jsx)(I.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3}),n&&Object(r.jsx)(w,{url:n,onClose:this.handleEscapeModale}),a.length>0&&Object(r.jsx)("button",{className:M.a.button,type:"button",onClick:this.fetchImages,children:"Load more"})]})}}]),t}(n.Component);t(73);o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(E,{})}),document.getElementById("root"))},8:function(e,a,t){e.exports={searchbar:"Searchbar_searchbar__3mu0T",searchForm:"Searchbar_searchForm__1t8Gb",searchFormButton:"Searchbar_searchFormButton__rZ8Fh",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__3A3gX",searchFormInput:"Searchbar_searchFormInput__7EtSf"}}},[[74,1,2]]]);
//# sourceMappingURL=main.fa6887d1.chunk.js.map